#summary Руководство пользователя эмулятора UKNCBTL.
#labels Featured
#sidebar TableOfContents

= Введение =

*UKNCBTL* -- это эмулятор советского компьютера *Электроника МС 0511*, также известного как *УКНЦ* («учебный компьютер Научного центра»).
УКНЦ выпускался с конца 1987 года на нескольких заводах, суммарный объём выпуска превысил 300 000 машин. Основное назначение -- использование в школах на уроках информатики: на базе УКНЦ создавались учебные классы (КУВТ) по 2-12 рабочих мест учащихся (РМУ), с одним рабочим местом преподавателя (РМП). В состав РМП, в отличие от РМУ, входил дисковод и матричный принтер.

Задача эмулятора UKNCBTL -- насколько это возможно полная эмуляция компьютера и его периферии, с тем чтобы сохранить знания об УКНЦ и возможность запуска программ для него на современных машинах (прежде всего PC), не имея реальных экземпляров устройства.


= Установка =

Скачайте последнюю версию UKNCBTL. Список дистрибутивов для скачивания находится по адресу: [http://code.google.com/p/ukncbtl/downloads/list].

Перед установкой новой версии UKNCBTL необходимо удалить старую версию программы через *Панель управления* > *Установка и удаление программ* (*Control Panel* | *Programs and Components*).

Разархивируйте архив с дистрибутивом в пустую папку. Запустите файл *UkncBtl.msi*. На экране появится мастер установки:

http://ukncbtl.googlecode.com/svn/trunk/docs/screenshot/UKNCBTL-Setup.png

Пройдите шаги мастера, следуя инструкциям на экране.
Программа будет установлена в папку: "C:\Program Files\UKNCBTL".


= Использование =

Для запуска эмулятора используйте ярлык в меню *Пуск* > *UKNCBTL* (*Start* > *UKNCBTL*).

== Первые шаги ==

Запуск УКНЦ в работу выполняется командой меню *Emulator* > *Run*. Для удобства эта команда вынесена на панель инструментов. Та же команда выполняет останов эмулятора; при следующей команде Run выполнение продолжится с того же места.

*Внимание!* При работе эмулятор потребляет значительную часть процессорного времени, поэтому рекомендуется останавливать эмулятор, когда его работа не требуется.

Сброс эмулятора в исходное состояние выполняется командой *Emulator* > *Reset*. Это соответствует нажатию кнопки СБРОС на реальной УКНЦ. Для выполнения сброса не требуется останавливать эмулятор.

Спустя несколько секунд после запуска вы увидите на экране загрузочное меню УКНЦ:

http://ukncbtl.googlecode.com/svn/trunk/docs/screenshot/Uknc-Started.png

Переход к нужной команде меню выполняется клавишами-стрелками, выбор пункта -- клавишей Enter.

Для загрузки с кассеты ПЗУ, выберите пункт меню *Drives* > *Cartridge 1*, укажите .bin-файл с образом кассеты ПЗУ (обычно это *romctr_basic.bin* -- единственный образ кассеты ПЗУ, поставляемый с эмулятором), затем выберите в меню УКНЦ пункт *2 - кассета ПЗУ* и нажмите Enter.

Для загрузки с диска, выберите пункт меню *Drives* > *Floppy MZ0:*, укажите файл с образом диска. Эмулятор поддерживает два формата образов дискет -- .dsk (образ обычного диска) и .rtd (образ диска NET-RT11). После этого выберите в меню УКНЦ пункт *1 - диск* и нажмите Enter. Если выбранный диск -- загрузочный, то вы увидите процесс загрузки с диска. Если диск оказался не загрузочным, на экране УКНЦ появится сообщение об ошибке вида *?BOOT-U-No boot on volume*.

Процесс загрузки с диска может включать в себя ввод текущей даты и времени -- при появлении подсказки укажите дату и время в предложенном формате и нажмите Enter.

По окончании загрузки появится приглашение к вводу команды -- обычно оно выглядит как точка в начале строки.

Для получения списка файлов на диске, введите команду *DIR* и нажав Enter:
 . DIR

Файлы с расширением .SAV -- это исполняемые файлы, их можно запустить, введя имя и нажав клавишу Enter, например:
 . TEST

*TODO*: как запустить программы с незагрузочного диска

Операционная система, используемая вместе с УКНЦ -- это RT-11 либо её советские клоны (ФОДОС, РАФОС). Поэтому, для более глубокого знакомства с работой на УКНЦ имеет смысл изучать руководства по работе в RT-11, в частности, [http://www.az-libr.ru/Persons/0GN/fe16506c/Books/000/Toc.shtml «RT-11, Step by Step» А.Г.Архангельского].
См. также список литературы и ссылки в Приложении.

*TODO*: где можно получить помощь

== Интерфейс ==
*TODO*: режимы и опции

== Встроенный отладчик ==

Встроенный отладчик включается/отключается по команде *View* > *Debug*.

Назначение отладочного режима -- двоякое. Во-первых, это инструмент для разработчиков эмулятора, позволяющий дойти до нужного места кода и пройти его по шагам, контроллируя что все функции работают правильно. Во-вторых, это возможность для пользователей эмулятора в деталях посмотреть работу программы.

Слева вверху -- экран УКНЦ. Слева внизу -- отладочная консоль, в которой можно вводить команды; краткий список команд выдается по команде h. Справа вверху -- окно состояния текущего процессора: вверху в боксе его регистры, справа от них содержимое стека, ниже дизассемблированный блок возле адреса PC; правее вверху -- состояние портов, внизу -- состояние каналов обмена данными между процессорами. Справа внизу -- окно состояния памяти. 

Красным цветом везде отмечены ячейки памяти, которые изменились после очередного шага или прогона. Перед шагом/запуском сохраняется состояние всей памяти и регистров процессоров, что позволяет о каждой ячейке сказать, изменилась ли она.

Список команд отладочной консоли выдается по команде 'h':
{{{
  c          Clear console log
  dXXXXXX    Disassemble from address XXXXXX
  g          Go; free run
  gXXXXXX    Go; run processor until breakpoint at address XXXXXX
  m          Memory dump at current address
  mXXXXXX    Memory dump at address XXXXXX
  mrN        Memory dump at address from register N; N=0..7
  p          Switch to other processor
  r          Show register values
  rN         Show value of register N; N=0..7,ps
  rN XXXXXX  Set register N to value XXXXXX; N=0..7,ps
  s          Step; executes one instruction (F8)
  u          Save memory dump to file memdumpXPU.bin
}}}


= Приложения =

== Раскладка клавиатуры ==
Раскладка:
 * A..Z — соответствующие клавиши УКНЦ, раскладка QWERTY
 * К1...К5 = F1...F5
 * ТАБ = TAB
 * AP2 = Esc
 * УПР = левый Ctrl
 * НР = левый Shift
 * ГРАФ = правый Ctrl
 * АЛФ = правый Shift
 * ФИКС = Caps Lock
 * ПОМ = Delete
 * УСТ = End
 * ИСП = PageDown
 * СТОП = Pause/Break, дублировано на PageUp
 * СБРОС = Insert

== Литература ==
 * Архангельский Андрей Германович. «RT-11, Step by Step». — Москва, 1989. [http://www.az-libr.ru/Persons/0GN/fe16506c/Books/000/Toc.shtml]
 * Л. И. Валикова, Г. В. Вигдорчик, А. Ю. Воробьев, А. А. Лукин. «Операционная система СМ ЭВМ РАФОС. Справочник». — М.: Финансы и статистика, 1984. — 207 с.
 * [http://www.bitsavers.org/pdf/dec/pdp11/rt11/ Документация на DEC RT-11 (PDF), англ.]

== Ссылки ==
 * Страница проекта UKNCBTL: [http://code.google.com/p/ukncbtl/]
 * УКНЦ в Википедии: [http://ru.wikipedia.org/wiki/УКНЦ]
 * UKNC в Wikipedia: [http://en.wikipedia.org/wiki/UKNC]
 * УКНЦ & PDP-11 -- страница Арсения Гордина: [http://uknc.narod.ru/]
 * PDP-11.ORG.RU: [http://pdp-11.org.ru/]