#summary Описание микрокода 1801ВМ2
#labels Microcode

= Вступление =

Здесь будут выкладки RE микрокода. Микрокод анализируется оптическим методом "на-глаз", глядя в микроскоп. Данный анализ не претендует на 100% работоспособное воссоздание оригинального микрокода.


= Заметки =

Общий формат микрокода - 34 бита.
{{{
MSB

321098 76543210987654321 0
333322 22222222111111111 1987 654 3210
AAAAAA LLLLLLLLLLLLLLLLL BBBB CCC TTTT

}}}

Где

AAAAAATTTТ  образуют адрес следующего микрослова --

TTTT - номер такта микрокоманды -- идет в счетчик микрокоманд


LLLLLLLLLLLLLLLLL + TTTT идет в АЛУ

LLLLLLLLLLLLLLLLL + BBBB+ TTTT идет в блок переходов

LLLLLLLLLLLLLLLLL + CCC + TTTT идет в блок управления

для удобночтения микрокода -- буду его писать мнемонически как связку:

пример
NEXT=10|R7=OP|NOP|NOP|STEP=12  -- будет означать
001000 LLLLLLLLLLLLLLLLL 0000 000 1010   --- (R7=OP пока placeholder)

тоесть 
СЛЕДМИКР| АЛУ | БП| БУ | ТАКТ

= АЛУ =

== Устройство АЛУ ==
Как ни странно в самом АЛУ есть 16 регистров общего назначения,Буферный регистр, Аккумулятор, 8 флагов признаков

обозначим их как uR0-uR15, CNVZ (уже знакомые нам) EFGH(пока непонятные) обозначим как uRS. Буферный регистр обозначим как uRB, аккумулятор как uA

== Микрокоманды АЛУ ==

бит 11 = признак одно-операндной микрокомманды -- (1 - 1операнд, 0- 2операнда)

биты 12-23 образуют микрокомманду АЛУ (обозначим как uc1-uc11)

=== Микрокоманды с одним операндом ===
Загрузка
{{{
 uc11 uc10 uc9 uc8 uc7 uc6 uc5 uc4 uc3 uc2 uc1    Описание

  0    X   0   1   0   1   uR  uR uR   uR   x     MOV uRB, uR
  1    0   0   1   0   1   x   x   x   x    0     MOV uC, uA[3..0]  (грузим uc4-uc2 в uA)
  1    0   0   1   0   1   x   x   x   x    1     MOV uC, uA[7..4]
  1    1   0   1   0   1   x   x   x   x    0     MOV uC, uA[11..8]
  1    1   0   1   0   1   x   x   x   x    1     MOV uC, uA[15..12]
}}}



=== Микрокоманды с двумя операндами ===


= Микрокоманды БП =

0000  - NOP

= Микрокоманды БУ =

000 - NOP